<krpano >

    <!-- vtourskin selector for skin/vtourskin.xml	
        	set(skin_locations, '../demotour-corfu/skin/')
    
    -->

    <include url="../demotour-corfu/skin/vtourskin_%$design%.xml" if="design !== null AND design !=='' AND design !=='' AND design !== 'design_default' " />
    <include url="../demotour-corfu/skin/vtourskin.xml" if="design === 'design_default' " />	<!-- reset to default, when otherwise -->

	<!-- enhanced contextmenu for vtourskin selector	-->
    <contextmenu>
        <item name="skin_change"
			caption="Change skin"
			enabled="true"
			visible="true"
			separator="true"
			onclick="
				set(layer[skin_selector].visible, 'false');
	            copy(layer[skin_selector].x, mouse.x);
	            calc(layer[skin_selector].y, ((mouse.y + layer[skin_selector].height + 70) LT stageheight) ? mouse.y : stageheight - layer[skin_selector].height - 70  );
	            set(layer[skin_selector].visible, 'true');
				" 
            />
	    </contextmenu>

 	<!-- skin selector krpano user interface -->
	<style name="skin_select" url="%SWFPATH%/plugins/textfield.swf" 
		align="lefttop"
		background="true" backgroundalpha="0.2" 
		css="calc:skin_settings.design_text_css + ' text-align:left; font-style:italic; font-size:16px;'" 
		textshadow="get:skin_settings.design_text_shadow"
		onclick="change_skin_design(get(name));set(layer[skin_selector].visible, 'false');"
		/>
	<layer name="skin_selector" keep="true" type="container" align="lefttop" 
			x="0" y="0" width="120" height="200" visible="false" 
			bgalpha="0.1" bgcapture="true"
			onout="set(visible, 'false')"
			>
		<layer name="design_default"     style="skin_select|skin_glow" html="Flat Skin (Default)"     y="0"    />
		<layer name="design_flat_light"  style="skin_select|skin_glow" html="Flat Light Skin"         y="25"   />
		<layer name="design_ultra_light" style="skin_select|skin_glow" html="Ultra Light Skin"        y="50"   />
		<layer name="design_glass"       style="skin_select|skin_glow" html="Glass Skin"              y="75"   />
		<layer name="design_117"         style="skin_select|skin_glow" html="Version 1.17 Skin"       y="100"  />
		<layer name="design_117round"    style="skin_select|skin_glow" html="Version 1.17 Round Skin" y="125"  />
		<layer name="design_black"       style="skin_select|skin_glow" html="Black Skin"              y="150"  />
		
	</layer>


	<!-- include optionally different skin
	<include url="../demotour-corfu/skin/vtourskin_design_flat_light.xml"  if="design == 'flat_light'"  />
	<include url="../demotour-corfu/skin/vtourskin_design_glass.xml"       if="design == 'glass'"       />
	<include url="../demotour-corfu/skin/vtourskin_design_ultra_light.xml" if="design == 'ultra_light'" />
	<include url="../demotour-corfu/skin/vtourskin_design_117.xml"         if="design == '117'"         />
	<include url="../demotour-corfu/skin/vtourskin_design_117round.xml"    if="design == '117_round'"   />
	<include url="../demotour-corfu/skin/vtourskin_design_black.xml"       if="design == 'black'"       />
	-->
	
	<action name="change_skin_design">
        if(design != null AND design !== '%1', 
            set(design, '%1');
            set(%0_show, 'false');
			copy(skin_thumbs_last_state, layer[skin_thumbs].state);
            loadpanoscene(tour.xml, get(xml.scene), calc('design=' + design), IGNOREKEEP|KEEPVIEW|KEEPMOVING, BLEND(0.5));
            );              
	</action>

	<!-- no loading text, keep thumbs opened state -->
 	<skin_settings  thumbs_opened="calc:skin_thumbs_last_state === 'opened' ? true : false" />
 	<skin_settings  if="change_skin_design_show == 'false'" loadingtext=""  />
	<layer name="skin_layer">
		<layer 		if="change_skin_design_show == 'false'" name="skin_loadingtext" html="" />
		</layer>

</krpano>



